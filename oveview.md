# Samic-Drinks-Shop
Final project in Programming C# @Teknikhögskolan
THIS TEXT IS IN SWEDISH

Overview<br>
Vid programstart kan du  välja om du är personal (Staff) eller kund (Customer). Dessutom initieras delar av Filemanager som enbart består av statiska variabler och metoder. Varje nytt ”ställe” du kommer till, har en egen vy samt egen grid.

Filemanager<br>
Filemanager hanterar den mesta filhanteringen (samt felhantering) via interna mestadels abstrakta metoder. Vissa metoder och variabler är publika för åtkomst i resterande delar av programmet. I början kopieras Products.csv & hela bildkatalogen ProductImages till C:/Windows/Temp/ via CopyFolder(string copyFromFolder, string CopyToFolder) samt CopyCSVToTemp(string path) Därefter läser Vouchers.csv & Products.csv från ReadFromCSV(string path). Manuell- samt Try/Catch- felhantering sker i DetectCSVErrors(string[] readCSVArray), där felaktiga produkt/voucher rader returneras till var sin lista. WriteErrorLog(List<string> source, string fname) skriver en errorlogfil.txt till C:/Windows/Temp. Användaren notifieras via Showmessage när programmet startas. Metoderna ShowCuredProducts(), ShowCuredVouchers() returnerar en string[] med bortsorterade invalida items från original arrayerna readProducts[], readVouchers[].

Staff<br>
Logga in (en sträng som kontrollerar att input = ”brad” & ”pitt”). Välj därefter valfri bild att ladda upp. Bilden som laddas upp visas prodImage.Source samt filnamnet kopplat till imageName.Content. Sker i PImage_Click(…). Där sätts också copyImgFrom & copyImgTo till sökvägar. Fyll i resterande uppgifter. En ”typ” av felhantering för prisboxen (PriceBox_PreviewTextInput(…)) förhindrar andra tecken än siffror. Checkboxen ”Featured = true” styr om det skall vara en Featured Product. Vid klick på Add, sker all felhantering med try och multipla catchsatser för hela produkten innan den läggs till Addproduct_Click(…). copyImgFrom & copyImgTo används. Produkten sparas i Windows/Temp/ProductImages samt  Windows/Temp/Products.csv. Omstart av program för att komma till butik.

Customer<br>
Här visas butiken. Uppbyggd med en Scrollviewer samt flera Grid i Grid för de olika produkterna. Butiken är helt dynamisk med obegränsat antal produkter. Två typer av produktvarianter med olika utseende. Featured Products (FP) och Regular Products (RP). Max 3 FP kan visas samtidigt. Utseendet styrs i Products.csv, sista kolumnen Special; True. Finns ingen Special;True i filen, visas den som RP. Finns endast en eller två FP stretchar dessa hela Row. FP läggs ni i griden featuredGrid & RP läggs in i regularGrid vilka finns inuti row 2 resp. 3 i customerGrid. Via knappen Upload Cart: UploadCart_Click(…) går en csv (valfritt namn) för cart att laddas upp från vart som helst på datorn. Innehållet läggs in i static Dictionary: Cart.ProductCollection som styr alla varor som finns i kundvagnen. Innan cartfilen laddas upp görs en ProductCollection.Clear(), Mer om detta i Design. Metoden DisplayProducts(bool randomFeaturedProducts) om random FP skall visas inte (true). Vid programstart eller backa tillbaka från Shopping Cart vyn. Vid false, visas de 3 första FP i CSV-listan. Vid klick på ShoppingCart, du till kundvagnen (Class Cart).

IProduct<br>
IProduct är ett Interface, som används av tre klasser. FeaturedProduct, RegularProduct samt CartItem (CI). FP & RP finns i Costumer.cs. CI i Checkout.cs Klasserna är designade att varje nytt objekt kommer färdigdesignat med egen Grid-design, bild, pris, text mm som bland annat hämtas automatiskt från den Filehandler.ShowCuredProducts(). Samtliga instanser läggs in i List<Iproducts>iProducts, som finns i Customer.cs, void CustomerView(). 
  
Cart<br>
Finns i Checkout.cs. Instatieras genom klick på Shopping Cart i butiken.  Här visas alla produkter som lagts till i kundvagnen, via ”Upload Cart” eller via ”Add to cart” i butiken. Från Dictionary ProductCollection instantieras nya instanser av CartItem:IProduct till List<Iproduct>CartItems och visas. Grid i Grid där alla CartItems visas. Du kan ta bort produkter, gå tillbaka och handla igen. Knappen ”Download Cart” sparar produkterna på valfritt ställe i en csv fil. Du kan spara flera olika kundkorgar. I Comboboxen under ”Select a discount Code” väljs rabatter. Läses in från Voucher.csv via Filemanager.ShowCuredVouchers() som finns i void CustomerView(). Pris och Rabatterat pris räknas om realtid. ”Keep shopping” går till butiken, men behåller allt i varukorgen. Vid klick på ”Pay” visas kvittot. I Pay_Click(…)  förs int discount och int totalPrice över till Receipt receipt.GetDiscount & receipt.GetTotalPrice. Därefter sorteras samtliga items i Cartitems där amount !=0, ut och förs över till List<Iproducts> ReceiptProduct.

Receipt<br>
Finns i Checkout.cs. Ett kvitto visas med sammanställning, där ReceiptProduct använder  i Grid i Grid; productGrid. Det finns ingen designklass för att visa produkterna i kvittot utan en forloop där varje item (ProductName, Amount och Price) från List<IProduct> ReceiptProducts läggs in i en egen Label. Sedan visas en sammanställning av Totalpris, vilken rabatt man valt i tidigare steg samt rabatterat slutpris. Det rabatterade slutpriset räknas ut igen, en extra kontroll att jämföra med det rabatterade slutpriset i kundvagnen. En abstrakt metod CreateLabel(string content, int fontSize) hjälper till att skapa upp de olika labels som visas. Slutligen finns en rolig feature som randomiserar ett nytt kvittonummer för varje gång man visar kvittot och använder Label receiptText.
